<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org">
	<head>
		<title>Pick Your Channel</title>
		<link rel="stylesheet" href="/css/welcome.css"/>
		<script type="text/javascript">
		var user = sessionStorage.getItem("user")

		if (user == null) {
			let name = prompt("What's your name?", "Guest")
					while (name === '' || name == null) {
						name = prompt("What's your name?", "Guest")
					}
			fetch('/users', {
				method: 'POST',
				body: name
			}).then(response => response.json())
			.then(user => {
				sessionStorage.setItem('user', JSON.stringify(user));
			})
		} else {
			user = JSON.parse(sessionStorage.getItem("user"))
					console.log(user)
		}
		</script>	
	</head>
	<body>
		<div>
			<h2>Choose the Channel You Desire</h2>
		</div>
		<div th:each="communicationLine : ${commLines}">
		<table>
			<tr>
				<td><a th:href="@{/commLines/{channelId}(channelId=${communicationLine.channelId})}" th:text="${communicationLine.channelId}"></a></td>
			</tr>
			
		</table>	
		</div>
		
	</body>
</html>